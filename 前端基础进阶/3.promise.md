## Promise
手写xxx方法论：
1. 该技术要解决什么问题？
2. 该技术是怎么解决它的？
3. 该技术（对比其他技术）有什么优缺点？
4. 如何解决这些缺点？

### 二、Promise要解决什么问题——回调地狱


### 三、Promise怎么解决回调地狱问题


### 四、Promise的优点
1. 减少缩进（将异步的写法变成同步的写法）
```javascript
// 函数作为参数层层嵌套
f1(xxx,function f2(a){
  f3(yyy,function f4(b){
      f5(a + b,function f6(){})
  })
})
```
使用promise的写法后：
```javascript
f1(xxx)
  .then(f2)  // 将作为参数的f2作为then的参数(满足条件后要执行的函数作为then的参数)  f3是作为f2的函数体，直接在f2里面调用了，这里无法看到  
  .then(f4)  // 将作为参数的f4作为then的参数(满足条件后要执行的函数作为then的参数)  f5是作为f4的函数体，直接在f5里面调用了，这里无法看到  
  .then(f6)  // 
```
使用then的写法，永远只有一个缩进，而使用回调的写法，随着嵌套的加深，缩进越来越多。

2. 消灭if(err)代码
* 错误处理单独放到一个函数中(then的第二个参数)
* 如果不处理，就一直往后抛
```javascript
f1(xxx)
.then(f2,error1)
.then(f4,error2)
.then(f6.error3)
.catch(errorAll)
```

### Promsie的特性
Promise是一个类
1. JS里类是特殊的函数
2. 类属性:length(可以忽略)   // length为1，只接受一个函数
3. 类方法:all/allSettled/race/reject/resolve    // Promise.all()、Promise.allSettled()这些都是类方法
4. 对象属性:then(重要)/finally/catch
5. 对象内部属性:state = pending/fulfilled/rejected

[Promise A+](https://promisesaplus.com/)