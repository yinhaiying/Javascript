# 垃圾回收机制


浏览器的垃圾回收机制，或者说是内存释放机制。由于我们代码执行时，都会形成一个执行上下文，然后进栈执行，这样的话，
会导致整个栈内存被沾满，因此，需要回收一些内存，将一些不需要的执行上下文进行清理掉，释放一部分内存。
栈内存释放：
* 加载页面，形成一个全局的上下文，只有页面关闭后， 全局上下文才会被释放。
* 函数执行会形成一个私有的上下文，进栈执行，当函数中代码执行完毕，大部分情况下，形成的上下文都会出栈被释放掉，以此来优化栈内存大小。
* 堆内存释放。由于堆内存是引用类型的，必须考虑是否它是否被其他人所引用，因此，它的回收比较复杂。
    方案一(例如谷歌)：查找引用。
    浏览器在空闲或者指定的时间内，查看所有的堆内存，把没有被任何东西占用的堆内存释放掉；但是占用着的是不被释放掉。
    方案二(例如IE):引用计数。
    创建了堆内存，则浏览器计数+1，取消占用则计数-1。当记录的数字为0的时候，则内存被释放掉。但是这种机制会导致计数混乱，出现“内存泄漏”。

## 内存泄漏

## 如何理解内存泄漏
首先我们必须理解什么是内存，内存是浏览器在执行代码的过程中，计算机内存为代码执行，或者变量存储开辟的内存空间。
比如我们的直接类型的数据会在开辟一个栈内存，引用类型的数据会开辟一个堆内存。通常来说，变量不再被需要的时候（比如函数执行完毕），这部分内存应该被回收，但是浏览器出于某种机制(比如常见的垃圾回收机制)会任务这个变量还可能被使用，不应该被回收。最常见的情况就是：
1. 定时器没有被清除
2. 组件中绑定的监听事件，在组件销毁时没有被注销
3. 一些订阅发布的事件监听器
4. 频繁使用的闭包(被遗忘)